<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Sora:wght@100..800&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="../static/css/style.css" />
		<script defer src="../static/js/script.js"></script>
		<title>Find Campaign</title>
	</head>
	<body>
		<div class="overlay"></div>
		<div class="mobile-nav">
			<div class="flex-between">
			  <a href="{% url 'login' %}" class="login-cta">Login/Register</a>
			  <span class="cancel-icon flex-center">
				<svg
				  width="54"
				  height="54"
				  viewBox="0 0 54 54"
				  fill="none"
				  xmlns="http://www.w3.org/2000/svg"
				>
				  <path
					d="M27 0C12.0789 0 0 12.0789 0 27C0 41.9211 12.0789 54 27 54C41.9211 54 54 41.9211 54 27C54 12.0789 41.9211 0 27 0ZM27 51.1579C13.6421 51.1579 2.84211 40.3579 2.84211 27C2.84211 13.6421 13.6421 2.84211 27 2.84211C40.3579 2.84211 51.1579 13.6421 51.1579 27C51.1579 40.3579 40.3579 51.1579 27 51.1579ZM28.9895 27L37.9421 18.0474C38.5105 17.4789 38.5105 16.6263 37.9421 16.0579C37.3737 15.4895 36.521 15.4895 35.9526 16.0579L27 25.0105L18.0474 16.0579C17.4789 15.4895 16.6263 15.4895 16.0579 16.0579C15.4895 16.6263 15.4895 17.4789 16.0579 18.0474L25.0105 27L16.0579 35.9526C15.4895 36.521 15.4895 37.3737 16.0579 37.9421C16.6263 38.5105 17.4789 38.5105 18.0474 37.9421L27 28.9895L35.9526 37.9421C36.521 38.5105 37.3737 38.5105 37.9421 37.9421C38.5105 37.3737 38.5105 36.521 37.9421 35.9526L28.9895 27Z"
					fill="#9835EF"
				  />
				</svg>
			  </span>
			</div>
	  
			<ul class="mobile-nav-links-container flex-column gp-15 mt-5">
			  <li><a href="/" class="mobile-nav-link">Home</a></li>
			  <li><a href="{% url 'find_campaign' %}" class="mobile-nav-link">Find campaign</a></li>
			  <li><a href="{% url 'start_campaign' %}" class="mobile-nav-link">Start campaign</a></li>
			  <li><a href="{% url 'profile' %}" class="mobile-nav-link">Profile</a></li>
			  <li><a href="{% url 'about' %}" class="mobile-nav-link">About</a></li>
			  <li><a href="{% url 'faq' %}" class="mobile-nav-link">FAQ</a></li>
			  <li><a href="#" class="mobile-nav-link">Fees & Payment</a></li>
			  <li><a href="#" class="mobile-nav-link">Support</a></li>
			</ul>
		  </div>
		<div class="find campaign page">
			<nav class="navbar sticky-top bos align-items-center bos">
				<div class="container">
					<img
						class="logo-img"
						src="../static/img/Feed-logo.png"
						alt="logo img"
					/>
					<div
						class="nav-util-cta-container ms-md-3 d-flex align-items-center gap-4"
					>
						<img
							class="search-icon"
							src="../static/img/svg/search-icon.svg"
							alt="search icon"
						/>
						<a href="#" class="start-camp-cta">START CAMPAIGN</a>
						<div class="profile-cta-container">
							<img
								class="profile-icon"
								src="../static/img/profile-icon.png"
								alt="profile icon"
							/>
							<img
								class="down-arrow"
								src="../static/img/svg/down-arrow.svg"
								alt="down arrow icon"
							/>
						</div>
					</div>
					<div class="hamburger">
						<span></span>
						<span></span>
						<span></span>
					</div>

					<!-- <div class="nav-cta-container d-flex">
		</div> -->
				</div>
				<span class="page-highlight-span">SEARCH</span>
			</nav>

			<main class="light-bg-clr pd-down">
				<section>
					<h2 class="page-head">Search on Feed Needs Without Borders</h2>
					<form method="get">
					<div class="search-util-wrapper">
						<div class="search-bar flex-between">
							<input placeholder="Type keyword/location" type="text" class="search-input">
							<button class="search-btn">Search</button>
						</div>
	
						<div data-select="category" class="category select-wrapper">
							<div class="select-head flex-between gp-10">
								<span class="mac-text-mid">Category</span>
								<span class="flex-center">
									<img class="down-arrow-icon" src="../static/img/svg/down-arrow-gray.svg" alt="down arrow icon">
								</span>
							</div>

							<div data-select="category-dropdown" class="select-dropdown">
								<div class="dropdown-item">
									<label class="terms-label" name = "select-all" for="select-all">
										Select all
										<input id="select-all" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" name = "party" for="social-initiatives">
										Social initiatives
										<input id="social-initiatives" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="disaster-relief">
										Disaster relief
										<input id="disaster-relief" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="life-threatening">
										Life threatening
										<input id="life-threatening" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="medical-emergencies">
										Medical Emergencies
										<input id="medical-emergencies" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="organization">
										Organization
										<input id="organization" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="education">
										Education
										<input id="education" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="art&culture">
										Art & Culture
										<input id="art&culture" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>
								</div>
							</div>
						</div>
	
						<div data-select="sector" class="sector select-wrapper ">
							<div class="select-head flex-between gp-10">
								<span class="mac-text-mid">Sector</span>
								<span class="flex-center">
									<img class="down-arrow-icon" src="../static/img/svg/down-arrow-gray.svg" alt="down arrow icon">
								</span>
							</div>

							<div data-select="sector-dropdown" class="select-dropdown">
								<div class="dropdown-item">
									<label class="terms-label" name = "select-all" for="select-all-2">
										Select all
										<input id="select-all-2" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" name = "party" for="child-welfare">
										Child welfare
										<input id="child-welfare" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="education-2">
										Education
										<input id="education-2" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="Community-development">
										Community development
										<input id="Community-development" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="environmental">
										Environmental
										<input id="environmental" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="medical">
										Medical
										<input id="medical" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="education">
										Education
										<input id="education" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>

									<label class="terms-label" for="art&culture">
										Art & Culture
										<input id="art&culture" type="checkbox" />
										<span class="terms-checkmark"></span>
									</label>
								</div>
							</div>
						</div>
					</div>
				</form>
					<span class="category-highlight">Trending</span>
				</section>

				<section class="mt-5">
					
					<div class="find-campaign-items-container">
						

						{% if campaigns_with_percentage %}
						{% for campaigns in campaigns_with_percentage  %}
						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									{{campaigns.campaign.campaign_name}}
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											{{campaigns.campaign.country}}
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						{% endfor %}
						{% else %}

						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									Helping children to school
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											Ghana
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									Helping children to school
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											Ghana
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									Helping children to school
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											Ghana
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									Helping children to school
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											Ghana
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									Helping children to school
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											Ghana
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="find-campaign-item">
							<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									Helping children to school
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											Ghana
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						{% endif %}
					</div>
				</section>
			</main>

			<footer class="pos-rel mt-5">
				<div class="footer-bottom-wrapper">
					<div class="w-100">
						<ul class="footer-links-container grid">
							<li><a href="#" class="footer-links">FAQ</a></li>
							<li><a href="#" class="footer-links">Contact us</a></li>
							<li>
								<a href="#" class="footer-links">Online fundraising Ideas</a>
							</li>
							<li><a href="#" class="footer-links">Bitcoin Fundraising</a></li>
							<li><a href="#" class="footer-links">Learn More</a></li>
							<li><a href="#" class="footer-links">Countries</a></li>
							<li><a href="#" class="footer-links">Read Blog</a></li>
							<li><a href="#" class="footer-links">How to fundraise</a></li>
							<li><a href="#" class="footer-links">Facebook Fundraising</a></li>
							<li><a href="#" class="footer-links">Facebook Fundraising</a></li>
							<li><a href="#" class="footer-links">About</a></li>
							<li><a href="#" class="footer-links">Help center</a></li>
						</ul>

						<div class="flex-wrap gp-20 footer-bottom-link-container mt-5">
							<a href="#" class="footer-bottom-link">Privacy Policy</a>
							<a href="#" class="footer-bottom-link">Terms & Conditions</a>
							<div class="social-media-container flex-wrap">
								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/facebook.svg"
										alt="Facebook icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/twitter.svg"
										alt="Twitter icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/instagram.svg"
										alt="Instagram icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/linkedIn.svg"
										alt="LinkedIn icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/tiktok.svg"
										alt="Tiktok icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/whatsapp.svg"
										alt="Whatsapp icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/telegram.svg"
										alt="Telegram icon"
									/>
								</a>

								<a href="#" class="flex-center">
									<img
										class="social-icon"
										src="../static/img/svg/socials/youtube.svg"
										alt="Youtube icon"
									/>
								</a>
							</div>
							<div class="copyright-container pos-rel flex gp-15">
								<p class="copyright-text">2024 Feed Needs</p>
								<span class="dash"></span>
								<p class="copyright-text">All rights reserved</p>
							</div>
						</div>
					</div>
				</div>
			</footer>
		</div>
		<script>
			const hamburger = document.querySelector(".hamburger");
			const cancelIcon = document.querySelector(".mobile-nav .cancel-icon");
			const overlay = document.querySelector(".overlay");
			const mobileNav = document.querySelector(".mobile-nav");
			const submitBtn = document.querySelector(".cta-btn.submit-btn");
			const acctForm = document.querySelector(".acct-form");
			if (hamburger) {
				hamburger.addEventListener("click", function () {
					overlay.classList.add("visible");
					mobileNav.classList.add("slideIn");
					document.body.classList.add("hide-overflow");
				});
			}

			if (cancelIcon)
				[
					cancelIcon.addEventListener("click", function () {
						overlay.classList.remove("visible");
						mobileNav.classList.remove("slideIn");
						document.body.classList.remove("hide-overflow");
					}),
				];

			if (submitBtn && acctForm) {
				submitBtn.addEventListener("click", function () {
					acctForm.submit();
				});
			}
		</script>
	</body>
</html>

<script>
	document.querySelector('.search-btn').addEventListener('click', async (event) => {
		event.preventDefault();
	
		// Collect user input
		const keyword = document.querySelector('.search-input').value;
		const selectedCategories = Array.from(
			document.querySelectorAll('[data-select="category-dropdown"] input:checked')
		).map(input => input.id);
		const selectedSectors = Array.from(
			document.querySelectorAll('[data-select="sector-dropdown"] input:checked')
		).map(input => input.id);
	
		// Send the search query via Fetch API
		const response = await fetch('/api/search/', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json',
				'X-CSRFToken': getCookie('csrftoken'), // Make sure CSRF token is included for Django
			},
			body: JSON.stringify({
				keyword,
				categories: selectedCategories,
				sectors: selectedSectors,
			}),
		});
	
		const data = await response.json();
	
		// Display results or "not found" message
		const resultsContainer = document.querySelector('.find-campaign-items-container');
		resultsContainer.innerHTML = '';
	
		if (data.length > 0) {
			data.forEach(item => {
				const resultItem = document.createElement('div');
				resultItem.className = 'find-campaign-item';
				resultItem.innerHTML = `
					<img
							class="feature-img mt-2"
							src="../static/img/hero-banner-(1).jpeg"
							alt="feature image"
							/>
							<div class="feature-desc-container">
								<h5 class="page-sub-h5-head">
									${item.campaign_name}
								</h5>
								<p class="mac-text-sm my-2">
									Helping children to admissions to school getting Helping
									children to admissions to school ang getting
								</p>

								<div class="">
									<div class="location-container pe-2">
										<div class="location-val-container d-flex gap-2">
											<img
											class="location-icon"
											src="../static/img/location-icon.png"
											alt="location icon"
											/>
											<p class="location-name page-mini-head d-flex">
											<span class="highlight-span-clr me-1"
												>Accra,</span
											>
											${item.country}
											</p>
										</div>

										<div class="mt-3">
											<p class="bold-p">$23, 000</p>
											<span class="bold-p highlight-span-clr">
											30% FUNDED
											</span>
										</div>
									</div>
								</div>
							</div>
				`;
				resultsContainer.appendChild(resultItem);
			});
		} else {
			resultsContainer.innerHTML = '<p>No search results found.</p>';
		}
	});
	
	// Helper function to get CSRF token
	function getCookie(name) {
		let cookieValue = null;
		if (document.cookie && document.cookie !== '') {
			const cookies = document.cookie.split(';');
			for (let i = 0; i < cookies.length; i++) {
				const cookie = cookies[i].trim();
				if (cookie.startsWith(name + '=')) {
					cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
					break;
				}
			}
		}
		return cookieValue;
	}
	
</script>